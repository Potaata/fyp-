{% extends 'base.html' %}
{% block content %}

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

    
    {% load static %}
	<!-- title -->
	<title>Recipes</title>

	<!-- favicon -->
	<link rel="shortcut icon" type="image/png" href="{%static "img/Screenshot-logo.png" %}">
	<!-- google font -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
	<!-- fontawesome -->
	<link rel="stylesheet" href="{%static "css/all.min.css" %}">
	<!-- bootstrap -->
	<link rel="stylesheet" href="{%static "bootstrap/css/bootstrap.min.css" %}">
	<!-- owl carousel -->
	<link rel="stylesheet" href="{%static "css/owl.carousel.css" %}">
	<!-- magnific popup -->
	<link rel="stylesheet" href="{%static "css/magnific-popup.css" %}">
	<!-- animate css -->
	<link rel="stylesheet" href="{%static "css/animate.css" %}">
	<!-- mean menu css -->
	<link rel="stylesheet" href="{%static "css/meanmenu.min.css" %}">
	<!-- main style -->
	<link rel="stylesheet" href="{%static "css/main.css" %}">
	<!-- responsive -->
	<link rel="stylesheet" href="{%static "css/responsive.css" %}">
</head>
<body>

	
	<!-- header -->

	<!-- search area -->
	
	<!-- breadcrumb-section -->
	<div class="breadcrumb-section breadcrumb-bg">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 offset-lg-2 text-center">
					<div class="breadcrumb-text">
						
						<h1>{{ object.recipe_name }} </h1>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end breadcrumb section -->

	<!-- featured section -->
	
		<div class="container">
			
				<div class="col-lg-7">
					<div class="row">
                            
							<div class="card my-4" style="width: 18rem">
								<div class="card-body">
									<div>
										{% if recipe.photo %}
										<img class="w-20 border rounded-full mr-4" src="{{ recipe.photo.url }}" alt=" Photo ">
										{% endif %}	
									</div>
									<h3 class="card-title">{{ recipe.recipe_name }}</h3>
									<h4 class="card-subtitle mb-2 text-muted">{{ recipe.author }}</h4>	
									<p class="card-text">{{ recipe.ingredients }}</p>
									<p class="card-text">{{ recipe.servings }}</p>
									<p class="card-text">{{ recipe.estimated }}</p>
									<p class="card-text">{{ recipe.description }}</p>			
									<h4 class="card-subtitle mb-2 text-muted">{{ recipe.created_at|date:"F d, Y" }}</h4>
								</div>
							</div> 
							{% if request.user.is_authenticated %}
							<div>
								<a href ="#" class="far fa-heart" class="favourite-btn" data-recipe-id="{{ recipe.id}}">Add to Favourites</a>
							</div>
							{% endif %}
							<div>
							</div>
							{% if object.author == user or user.is_staff %}
								<div class="col-4">
									<a class="btn" href="{% url 'recipes-update' object.id %}">Update</a>
									<a class="btn btn-outline-danger" href="{% url 'recipes-delete' object.id %}">Delete</a>
								
								</div>
							{% endif %}
					</div>	
			</div>
		</div>
		
		
	<!-- end featured section -->

	<!-- footer -->
	
	<!-- copyright -->

	<!-- jquery -->
	<script src="{%static "js/jquery-1.11.3.min.js" %}"></script>
	<!-- bootstrap -->
	<script src="{%static "bootstrap/js/bootstrap.min.js" %}"></script>
	<!-- count down -->
	<script src="{%static "js/jquery.countdown.js" %}"></script>
	<!-- isotope -->
	<script src="{%static "js/jquery.isotope-3.0.6.min.js" %}"></script>
	<!-- waypoints -->
	<script src="{%static "js/waypoints.js" %}"></script>
	<!-- owl carousel -->
	<script src="{%static "js/owl.carousel.min.js" %}"></script>
	<!-- magnific popup -->
	<script src="{%static "js/jquery.magnific-popup.min.js" %}"></script>
	<!-- mean menu -->
	<script src="{%static "js/jquery.meanmenu.min.js" %}"></script>
	<!-- sticker js -->
	<script src="{%static "js/sticker.js" %}"></script>
	<!-- main js -->
	<script src="{%static "js/main.js" %}"></script>

</body>
</html>
{% endblock %}

{% block javascript %}
{% csrf_token %}
<script>
	$(document).ready(function() {
		$('.favourite-btn').click(function() {
			var recipeId = $(this).data('recipe-id');
			$.ajax({
				url: '/favourite/' + recipeId + '/',
				method: 'POST',
				success: function(data) {
					if (data.created) {
						alert('Item bookmarked!');
					} else {
						alert('Item already bookmarked!');
					}
				}
			});
		});
	});
</script>
{% endblock javascript %}